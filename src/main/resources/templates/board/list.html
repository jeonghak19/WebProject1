<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragment/header :: head}"></head>
<link rel="stylesheet" href="/css/boardList.css">
<body>
<div th:replace="~{fragment/navbar :: div}"></div>

<div class="kind_wrap">
	<div class="kind_slider">
		<ul class="slider">
			<li><img src="https://via.placeholder.com/800x200.png?text=1" alt=""></li>
			<li><img src="https://via.placeholder.com/800x200.png?text=2" alt=""></li>
			<li><img src="https://via.placeholder.com/800x200.png?text=3" alt=""></li>
		</ul>
	</div>
	<div class="pagination">
		<span data-index="0" class="dot active"></span>
		<span data-index="1" class="dot"></span>
		<span data-index="2" class="dot"></span>
	</div>
</div>



<div class="container top-item">
	<div class="image-container text-center mb-4">
		<img src="/images/Health_Mate.jpg" alt="Board Image" class="img-fluid" style="max-width: 100%; height: auto;">
	</div>
	<div class="grid text-center card-grid">
		<div class="card" th:each="board : ${boards}">
			<div class="card-body">
				<div>
					<h3 class="card-title" th:text="${board.boardTitle}"></h3>
					<a th:href="@{/post/posts/search(boardId=${board.boardId})}" class="btn btn-outline-primary">
						<img src="/icons/go-icon.png" alt="Go Icon" style="width: 20px; height: 20px;"/>
					</a>
				</div>
			</div>
		</div>
	</div>

	<form th:if="${session != null and session.user != null and session.user.name == '관리자'}" action="/board/create" method="get">
		<br><button type="submit" class="btn btn-outline-dark create-btn">게시판 생성</button><br>
	</form>
</div>

<!-- Footer 템플릿 포함 -->
<div th:replace="~{fragment/footer:: footer}"></div>
<script>
	let currentIdx = 0;
	const slides = document.querySelectorAll('.kind_wrap .slider li');
	const totalSlides = slides.length;
	const slider = document.querySelector('.kind_wrap .slider');
	const dots = document.querySelectorAll('.pagination .dot');
	let autoSlideInterval;

	//슬라이드 이동 함수
	function moveSlide(index) {
		currentIdx = index;
		// 템플릿 리터럴을 사용하여 올바르게 문자열을 작성합니다.
		slider.style.transform = `translateX(-${currentIdx * 100}%)`;
		updatePagination();
	}


	// 페이지네이션 상태 업데이트 함수
	function updatePagination() {
		dots.forEach(dot => dot.classList.remove('active'));
		dots[currentIdx].classList.add('active');
	}

	// 자동 슬라이드 시작
	function startAutoSlide() {
		autoSlideInterval = setInterval(() => {
			currentIdx = (currentIdx + 1) % totalSlides;
			moveSlide(currentIdx);
		}, 3000);
	}

	// 자동 슬라이드 초기화
	function resetAutoSlide() {
		clearInterval(autoSlideInterval);
		startAutoSlide();
	}

	// 페이지네이션 클릭 이벤트
	dots.forEach(dot => {
		dot.addEventListener('click', (event) => {
			const index = parseInt(event.target.getAttribute('data-index'));
			moveSlide(index);
			resetAutoSlide();
		});
	});

	// 페이지 로드 시 자동 슬라이드 시작
	startAutoSlide();

</script>
</body>
</html>